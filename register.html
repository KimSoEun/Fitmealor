<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitmealor - Sign Up / íšŒì›ê°€ì…</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            max-width: 800px;
            width: 100%;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        .section-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #667eea;
            margin: 30px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }
        .section-title:first-child {
            margin-top: 0;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }
        .required {
            color: #d32f2f;
            margin-left: 3px;
        }
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }
        .allergen-checkboxes {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            transition: background 0.2s;
        }
        .checkbox-item:hover {
            background: #e9ecef;
        }
        .checkbox-item input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            cursor: pointer;
        }
        .checkbox-item label {
            margin: 0;
            font-weight: 500;
            font-size: 13px;
            cursor: pointer;
            flex: 1;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s;
            margin-top: 20px;
        }
        .btn:hover {
            transform: translateY(-2px);
        }
        .btn:active {
            transform: translateY(0);
        }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .link-text {
            text-align: center;
            margin-top: 20px;
            color: #666;
        }
        .link-text a {
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
        }
        .link-text a:hover {
            text-decoration: underline;
        }
        .alert {
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        .error-text {
            font-size: 12px;
            color: #d32f2f;
            margin-top: 5px;
            font-weight: 500;
        }
        .error-text::before {
            content: "âš ï¸ ";
        }
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .header h1 {
                font-size: 2em;
            }
            .header p {
                font-size: 0.9em;
            }
            .grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .allergen-checkboxes {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            .card {
                padding: 20px;
                border-radius: 15px;
            }
            .checkbox-item {
                padding: 8px;
            }
            .checkbox-item label {
                font-size: 12px;
            }
            input, select {
                font-size: 16px;
                padding: 14px;
            }
            .btn {
                padding: 16px 30px;
                font-size: 16px;
            }
            .section-title {
                font-size: 1.1em;
            }
            label {
                font-size: 13px;
            }
            .help-text {
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8em;
            }
            .card {
                padding: 15px;
            }
            .allergen-checkboxes {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¥— Fitmealor</h1>
            <p>Sign Up / íšŒì›ê°€ì…</p>
        </div>

        <div class="card">
            <div class="link-text" style="margin-bottom: 30px;">
                Already have an account? / ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
                <a href="login.html">Login / ë¡œê·¸ì¸</a>
            </div>

            <div id="alertBox" class="alert"></div>

            <form id="registerForm">
                <!-- Account Information / ê³„ì • ì •ë³´ -->
                <div class="section-title">ğŸ“§ Account Information / ê³„ì • ì •ë³´</div>

                <div class="form-group">
                    <label>Email / ì´ë©”ì¼<span class="required">*</span></label>
                    <input type="text" id="email" required placeholder="example@email.com" inputmode="email" lang="en">
                    <div class="error-text" id="emailError" style="display: none;"></div>
                    <div class="help-text">Please use English letters only / ì˜ë¬¸ìë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
                </div>

                <div class="grid">
                    <div class="form-group">
                        <label>Password / ë¹„ë°€ë²ˆí˜¸<span class="required">*</span></label>
                        <input type="password" id="password" required placeholder="Example123!">
                        <div class="error-text" id="passwordError" style="display: none;"></div>
                        <div class="help-text">Must include: English letters, numbers, and special characters (!@#$%^&* etc.) / ì˜ë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨ í•„ìˆ˜</div>
                    </div>
                    <div class="form-group">
                        <label>Confirm Password / ë¹„ë°€ë²ˆí˜¸ í™•ì¸<span class="required">*</span></label>
                        <input type="password" id="passwordConfirm" required placeholder="Re-enter password">
                        <div class="error-text" id="passwordConfirmError" style="display: none;"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Name / ì´ë¦„<span class="required">*</span></label>
                    <input type="text" id="name" required placeholder="í™ê¸¸ë™ / John Doe">
                </div>

                <!-- Health Profile / ê±´ê°• í”„ë¡œí•„ -->
                <div class="section-title">ğŸ’ª Health Profile / ê±´ê°• í”„ë¡œí•„</div>

                <div class="grid">
                    <div class="form-group">
                        <label>Age / ë‚˜ì´<span class="required">*</span></label>
                        <input type="number" id="age" required min="1" max="120" placeholder="28">
                    </div>
                    <div class="form-group">
                        <label>Gender / ì„±ë³„</label>
                        <select id="gender">
                            <option value="unspecified">Prefer not to say / ë¯¸ì„ íƒ</option>
                            <option value="male">Male / ë‚¨ì„±</option>
                            <option value="female">Female / ì—¬ì„±</option>
                        </select>
                    </div>
                </div>

                <div class="grid">
                    <div class="form-group">
                        <label>Height / í‚¤ (cm)<span class="required">*</span></label>
                        <input type="number" id="height" required min="100" max="250" step="0.1" placeholder="175">
                    </div>
                    <div class="form-group">
                        <label>Weight / ì²´ì¤‘ (kg)<span class="required">*</span></label>
                        <input type="number" id="weight" required min="30" max="300" step="0.1" placeholder="70">
                    </div>
                </div>

                <div class="grid">
                    <div class="form-group">
                        <label>Target Weight / ëª©í‘œ ì²´ì¤‘ (kg)<span class="required">*</span></label>
                        <input type="number" id="targetWeight" required min="30" max="300" step="0.1" placeholder="65">
                    </div>
                    <div class="form-group">
                        <label>Activity Level / í™œë™ëŸ‰<span class="required">*</span></label>
                        <select id="activity" required>
                            <option value="">Select / ì„ íƒí•˜ì„¸ìš”</option>
                            <option value="sedentary">Sedentary / ë¹„í™œë™ì </option>
                            <option value="light">Light / ê°€ë²¼ìš´ í™œë™</option>
                            <option value="moderate">Moderate / ë³´í†µ</option>
                            <option value="active">Active / í™œë™ì </option>
                            <option value="very_active">Very Active / ë§¤ìš° í™œë™ì </option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>Health Goal / ê±´ê°• ëª©í‘œ<span class="required">*</span></label>
                    <select id="goal" required>
                        <option value="">Select / ì„ íƒí•˜ì„¸ìš”</option>
                        <option value="lose_weight">Lose Weight / ì²´ì¤‘ ê°ëŸ‰</option>
                        <option value="maintain">Maintain / ìœ ì§€</option>
                        <option value="gain_muscle">Gain Muscle / ê·¼ìœ¡ ì¦ê°€</option>
                        <option value="bulk_up">Bulk Up / ë²Œí¬ì—…</option>
                    </select>
                </div>

                <!-- Allergy Information / ì•Œë ˆë¥´ê¸° ì •ë³´ -->
                <div class="section-title">ğŸš« Allergy Information / ì•Œë ˆë¥´ê¸° ì •ë³´</div>
                <div class="help-text" style="margin-bottom: 15px;">
                    Select all allergens you have / ì•Œë ˆë¥´ê¸°ê°€ ìˆëŠ” í•­ëª©ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”
                </div>

                <div class="allergen-checkboxes">
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-eggs" value="eggs" class="allergen-checkbox">
                        <label for="allergy-eggs">Eggs / ë‚œë¥˜</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-milk" value="milk" class="allergen-checkbox">
                        <label for="allergy-milk">Milk / ìš°ìœ </label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-buckwheat" value="buckwheat" class="allergen-checkbox">
                        <label for="allergy-buckwheat">Buckwheat / ë©”ë°€</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-peanuts" value="peanuts" class="allergen-checkbox">
                        <label for="allergy-peanuts">Peanuts / ë•…ì½©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-soybeans" value="soybeans" class="allergen-checkbox">
                        <label for="allergy-soybeans">Soybeans / ëŒ€ë‘</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-wheat" value="wheat" class="allergen-checkbox">
                        <label for="allergy-wheat">Wheat / ë°€</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-mackerel" value="mackerel" class="allergen-checkbox">
                        <label for="allergy-mackerel">Mackerel / ê³ ë“±ì–´</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-crab" value="crab" class="allergen-checkbox">
                        <label for="allergy-crab">Crab / ê²Œ</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-shrimp" value="shrimp" class="allergen-checkbox">
                        <label for="allergy-shrimp">Shrimp / ìƒˆìš°</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-pork" value="pork" class="allergen-checkbox">
                        <label for="allergy-pork">Pork / ë¼ì§€ê³ ê¸°</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-peach" value="peach" class="allergen-checkbox">
                        <label for="allergy-peach">Peach / ë³µìˆ­ì•„</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-tomato" value="tomato" class="allergen-checkbox">
                        <label for="allergy-tomato">Tomato / í† ë§ˆí† </label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-sulfites" value="sulfites" class="allergen-checkbox">
                        <label for="allergy-sulfites">Sulfites / ì•„í™©ì‚°ë¥˜</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-walnuts" value="walnuts" class="allergen-checkbox">
                        <label for="allergy-walnuts">Walnuts / í˜¸ë‘</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-chicken" value="chicken" class="allergen-checkbox">
                        <label for="allergy-chicken">Chicken / ë‹­ê³ ê¸°</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-beef" value="beef" class="allergen-checkbox">
                        <label for="allergy-beef">Beef / ì‡ ê³ ê¸°</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-squid" value="squid" class="allergen-checkbox">
                        <label for="allergy-squid">Squid / ì˜¤ì§•ì–´</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-shellfish" value="shellfish" class="allergen-checkbox">
                        <label for="allergy-shellfish">Shellfish / ì¡°ê°œë¥˜</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-pine-nuts" value="pine_nuts" class="allergen-checkbox">
                        <label for="allergy-pine-nuts">Pine Nuts / ì£</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-mussels" value="mussels" class="allergen-checkbox">
                        <label for="allergy-mussels">Mussels / í™í•©</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-abalone" value="abalone" class="allergen-checkbox">
                        <label for="allergy-abalone">Abalone / ì „ë³µ</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="allergy-oysters" value="oysters" class="allergen-checkbox">
                        <label for="allergy-oysters">Oysters / êµ´</label>
                    </div>
                </div>

                <button type="submit" class="btn" id="submitBtn">
                    âœ¨ Complete Registration / íšŒì›ê°€ì… ì™„ë£Œ
                </button>
            </form>
        </div>
    </div>

    <script>
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const submitBtn = document.getElementById('submitBtn');
            const alertBox = document.getElementById('alertBox');

            // Email validation
            const email = document.getElementById('email').value;
            console.log('Validating email:', email); // Debug

            // First check: Only allow English letters, numbers, and email-related symbols
            const validCharsRegex = /^[a-zA-Z0-9@._-]+$/;
            if (!validCharsRegex.test(email)) {
                showAlert('âŒ Email must contain only English letters, numbers, and symbols (@._-) / ì´ë©”ì¼ì€ ì˜ë¬¸ì, ìˆ«ì, ê¸°í˜¸(@._-)ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤', 'error');
                return;
            }

            // Second check: @ symbol
            if (!email.includes('@')) {
                showAlert('âŒ Email must include @ symbol (e.g., user@example.com) / ì´ë©”ì¼ì— @ ê¸°í˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤ (ì˜ˆ: user@example.com)', 'error');
                return;
            }

            // Third check: dot (.) after @
            const domainPart = email.split('@')[1];
            if (!domainPart || !domainPart.includes('.')) {
                showAlert('âŒ Email must include a dot (.) after @ (e.g., user@example.com) / ì´ë©”ì¼ì— @ ë’¤ì— ì (.)ì´ í•„ìš”í•©ë‹ˆë‹¤ (ì˜ˆ: user@example.com)', 'error');
                return;
            }

            // Fourth check: full regex validation
            const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
            if (!emailRegex.test(email)) {
                showAlert('âŒ Invalid email format (e.g., user@example.com) / ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ (ì˜ˆ: user@example.com)', 'error');
                return;
            }

            console.log('Email validation passed'); // Debug

            // Password validation
            const password = document.getElementById('password').value;
            const passwordConfirm = document.getElementById('passwordConfirm').value;

            // Check minimum length
            if (password.length < 8) {
                showAlert('âŒ Password must be at least 8 characters / ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤', 'error');
                return;
            }

            // Check for English letters (a-z, A-Z)
            if (!/[a-zA-Z]/.test(password)) {
                showAlert('âŒ Password must contain at least one English letter / ë¹„ë°€ë²ˆí˜¸ì— ì˜ë¬¸ìê°€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤', 'error');
                return;
            }

            // Check for numbers (0-9)
            if (!/[0-9]/.test(password)) {
                showAlert('âŒ Password must contain at least one number / ë¹„ë°€ë²ˆí˜¸ì— ìˆ«ìê°€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤', 'error');
                return;
            }

            // Check for special characters
            if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
                showAlert('âŒ Password must contain at least one special character (!@#$%^&* etc.) / ë¹„ë°€ë²ˆí˜¸ì— íŠ¹ìˆ˜ë¬¸ìê°€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤ (!@#$%^&* ë“±)', 'error');
                return;
            }

            if (password !== passwordConfirm) {
                showAlert('âŒ Passwords do not match / ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤', 'error');
                return;
            }

            // Get selected allergies
            const allergies = Array.from(document.querySelectorAll('.allergen-checkbox:checked'))
                .map(cb => cb.value);

            const data = {
                email: document.getElementById('email').value,
                password: password,
                name: document.getElementById('name').value,
                age: parseInt(document.getElementById('age').value),
                gender: document.getElementById('gender').value,
                height_cm: parseFloat(document.getElementById('height').value),
                weight_kg: parseFloat(document.getElementById('weight').value),
                target_weight_kg: parseFloat(document.getElementById('targetWeight').value),
                activity_level: document.getElementById('activity').value,
                health_goal: document.getElementById('goal').value,
                allergies: allergies
            };

            // Disable button
            submitBtn.disabled = true;
            submitBtn.textContent = 'â³ Registering... / ë“±ë¡ ì¤‘...';

            try {
                const response = await fetch('http://localhost:8000/api/v1/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (response.ok) {
                    showAlert('âœ… Registration successful! Redirecting to login... / íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...', 'success');

                    // Store user info
                    localStorage.setItem('fitmealor_user', JSON.stringify(result.user));
                    localStorage.setItem('fitmealor_token', result.token);

                    setTimeout(() => {
                        window.location.href = 'demo_ui.html';
                    }, 2000);
                } else {
                    showAlert('âŒ ' + (result.detail || result.message || 'Registration failed / íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤'), 'error');
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'âœ¨ íšŒì›ê°€ì… ì™„ë£Œ / Complete Registration';
                }
            } catch (error) {
                showAlert('âŒ Server connection failed. Please check if the server is running. / ì„œë²„ ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.', 'error');
                submitBtn.disabled = false;
                submitBtn.textContent = 'âœ¨ íšŒì›ê°€ì… ì™„ë£Œ / Complete Registration';
            }
        });

        function showAlert(message, type) {
            const alertBox = document.getElementById('alertBox');
            alertBox.className = 'alert alert-' + type;
            alertBox.textContent = message;
            alertBox.style.display = 'block';

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Real-time email validation on blur (when user leaves the field)
        document.getElementById('email').addEventListener('blur', function() {
            const email = this.value;
            const errorElement = document.getElementById('emailError');

            if (!email) {
                errorElement.style.display = 'none';
                return;
            }

            // First check: Only allow English letters, numbers, and email-related symbols
            const validCharsRegex = /^[a-zA-Z0-9@._-]+$/;
            if (!validCharsRegex.test(email)) {
                errorElement.textContent = 'Email must contain only English letters, numbers, and symbols (@._-) / ì´ë©”ì¼ì€ ì˜ë¬¸ì, ìˆ«ì, ê¸°í˜¸(@._-)ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤';
                errorElement.style.display = 'block';
                return;
            }

            // Second check: @ symbol
            if (!email.includes('@')) {
                errorElement.textContent = 'Email must include @ symbol (e.g., user@example.com) / ì´ë©”ì¼ì— @ ê¸°í˜¸ê°€ í•„ìš”í•©ë‹ˆë‹¤ (ì˜ˆ: user@example.com)';
                errorElement.style.display = 'block';
                return;
            }

            // Third check: dot (.) after @
            const domainPart = email.split('@')[1];
            if (!domainPart || !domainPart.includes('.')) {
                errorElement.textContent = 'Email must include a dot (.) after @ (e.g., user@example.com) / ì´ë©”ì¼ì— @ ë’¤ì— ì (.)ì´ í•„ìš”í•©ë‹ˆë‹¤ (ì˜ˆ: user@example.com)';
                errorElement.style.display = 'block';
                return;
            }

            // Fourth check: full regex validation
            const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
            if (!emailRegex.test(email)) {
                errorElement.textContent = 'Invalid email format (e.g., user@example.com) / ì´ë©”ì¼ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤ (ì˜ˆ: user@example.com)';
                errorElement.style.display = 'block';
                return;
            }

            // All checks passed
            errorElement.style.display = 'none';
        });

        // Clear error when user starts typing again
        document.getElementById('email').addEventListener('input', function() {
            const errorElement = document.getElementById('emailError');
            errorElement.style.display = 'none';
        });

        // Real-time password validation on blur
        document.getElementById('password').addEventListener('blur', function() {
            const password = this.value;
            const errorElement = document.getElementById('passwordError');

            if (!password) {
                errorElement.style.display = 'none';
                return;
            }

            // Check minimum length
            if (password.length < 8) {
                errorElement.textContent = 'Password must be at least 8 characters / ë¹„ë°€ë²ˆí˜¸ëŠ” ìµœì†Œ 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤';
                errorElement.style.display = 'block';
                return;
            }

            // Check for English letters (a-z, A-Z)
            if (!/[a-zA-Z]/.test(password)) {
                errorElement.textContent = 'Password must contain at least one English letter / ë¹„ë°€ë²ˆí˜¸ì— ì˜ë¬¸ìê°€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤';
                errorElement.style.display = 'block';
                return;
            }

            // Check for numbers (0-9)
            if (!/[0-9]/.test(password)) {
                errorElement.textContent = 'Password must contain at least one number / ë¹„ë°€ë²ˆí˜¸ì— ìˆ«ìê°€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤';
                errorElement.style.display = 'block';
                return;
            }

            // Check for special characters
            if (!/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password)) {
                errorElement.textContent = 'Password must contain at least one special character (!@#$%^&* etc.) / ë¹„ë°€ë²ˆí˜¸ì— íŠ¹ìˆ˜ë¬¸ìê°€ ìµœì†Œ 1ê°œ ì´ìƒ í¬í•¨ë˜ì–´ì•¼ í•©ë‹ˆë‹¤';
                errorElement.style.display = 'block';
                return;
            }

            // All checks passed
            errorElement.style.display = 'none';
        });

        // Clear password error when user starts typing again
        document.getElementById('password').addEventListener('input', function() {
            const errorElement = document.getElementById('passwordError');
            errorElement.style.display = 'none';
        });

        // Real-time password confirmation validation
        document.getElementById('passwordConfirm').addEventListener('blur', function() {
            const password = document.getElementById('password').value;
            const passwordConfirm = this.value;
            const errorElement = document.getElementById('passwordConfirmError');

            if (!passwordConfirm) {
                errorElement.style.display = 'none';
                return;
            }

            if (password !== passwordConfirm) {
                errorElement.textContent = 'Passwords do not match / ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤';
                errorElement.style.display = 'block';
            } else {
                errorElement.style.display = 'none';
            }
        });

        // Clear password confirmation error when user starts typing
        document.getElementById('passwordConfirm').addEventListener('input', function() {
            const errorElement = document.getElementById('passwordConfirmError');
            errorElement.style.display = 'none';
        });

        // Enter key navigation: Age -> Gender
        document.getElementById('age').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('gender').focus();
            }
        });

        // Enter key navigation: Gender -> Height
        document.getElementById('gender').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('height').focus();
            }
        });

        // Open dropdown when arrow keys are pressed on gender select
        document.getElementById('gender').addEventListener('keydown', function(e) {
            const select = this;

            if (e.key === 'ArrowUp' || e.key === 'Up' || e.key === 'ArrowDown' || e.key === 'Down') {
                // Don't prevent default - let browser handle opening dropdown
                // This will show the full options list like other select elements
                select.click(); // Open the dropdown
            }
        });
    </script>
</body>
</html>
